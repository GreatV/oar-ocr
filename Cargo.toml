[workspace]
members = [".", "oar-ocr-derive", "oar-ocr-core", "oar-ocr-vl"]
resolver = "2"

[workspace.package]
version = "0.5.1"
edition = "2024"
license = "Apache-2.0"
authors = ["Wang Xin <xinwang614@gmail.com>"]
repository = "https://github.com/greatv/oar-ocr"
homepage = "https://github.com/greatv/oar-ocr"

[package]
name = "oar-ocr"
version.workspace = true
edition.workspace = true
license.workspace = true
authors.workspace = true
repository.workspace = true
homepage.workspace = true
description = "A comprehensive OCR library built in Rust with ONNX Runtime for efficient inference"
readme = "README.md"
keywords = [
    "ocr",
    "onnx",
    "computer-vision",
    "text-recognition",
    "machine-learning",
]
categories = ["computer-vision", "science"]

[features]
default = ["download-binaries"]
visualization = ["dep:ab_glyph"]
# ONNX Runtime execution provider features
cuda = ["oar-ocr-core/cuda"]
tensorrt = ["oar-ocr-core/tensorrt"]
directml = ["oar-ocr-core/directml"]
coreml = ["oar-ocr-core/coreml"]
webgpu = ["oar-ocr-core/webgpu"]
openvino = ["oar-ocr-core/openvino"]
# Auto-download ONNX Runtime binaries during build (enabled by default).
# Set ORT_LIB_LOCATION to use a custom installation (skips download).
# Use --no-default-features for offline/enterprise environments.
download-binaries = ["oar-ocr-core/download-binaries"]

[dependencies]
# Core library with all types and predictors
oar-ocr-core = { version = "0.5.1", path = "oar-ocr-core" }
# Derive macros
oar-ocr-derive = { version = "0.5.1", path = "oar-ocr-derive" }

# Direct dependencies for oarocr module
image = "0.25.6"
imageproc = "0.26.0"
serde = { version = "1.0", features = ["derive", "rc"] }
serde_json = "1.0"
rayon = "1.8"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# Optional dependencies for visualization feature
ab_glyph = { version = "0.2", optional = true }

[dev-dependencies]
clap = { version = "4.5.42", features = ["derive"] }
tempfile = "3.19"
ab_glyph = "0.2"
